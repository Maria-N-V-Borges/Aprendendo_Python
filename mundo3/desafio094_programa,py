# Lista principal que vai armazernar todos os dicionários (pessoas)
pessoas = []

print("=" * 50)
print(f"{'CADASTRE UMA PESSOA':^50}")
print("=" * 50)

while True:
  # Dicionário para cada pessoa
  pessoa = {}

  # Coletando dados
  pessoa['nome'] = input('Nome: ').strip().title()

  # Validando sexo
  while True:
    sexo = input('Sexo: [M/F] ').strip().upper()[0]
    if sexo in 'MF':
      pessoa['sexo'] = sexo
      break
    print('ERRO! Por favor, digite apenas M ou F.')

  # Validando idade
  while True:
    try:
      pessoa['idade'] = int(input('Idade: '))
      break
    except ValueError:
      print('ERRO! Por favor, digite um número inteiro.')

  # Adicionando a pessoa à lista
  pessoas.append(pessoa.copy())

  # Perguntando se quer continuar
  while True:
    continuar = input('Quer continuar? [S/N] ').strip().upper()[0]
    if continuar in 'SN':
      break
    print('ERRO! Responda apenas S ou N.')

  if continuar == 'N':
    break
  print("-" * 30)

print("\n"+ "=" * 50)
print(f"{'ANALISE DOS DADOS':^50}")
print("=" * 50)

# A) Quantas pessoas foram cadastradas
total_pessoas = len(pessoas)
print(f'A) Ao todo temos {total_pessoas} pessoa(s) cadastrada(s).')

# B) Média de idade
if total_pessoas > 0:
  soma_idades = sum(p['idade'] for p in pessoas)
  media_idade = soma_idades / total_pessoas
  print(f'B) A média de idade é de {media_idade:.1f} anos.')

  # C) Lista com as mulheres
  mulheres = [p['nome'] for p in pessoas if p['sexo'] == 'F']
  print(f'C) As mulheres cadastradas foram: ', end='')
  if mulheres:
    print(', '.join(mulheres))
  else:
    print('Nenhuma mulher foi cadastrada.')

  # D) Lista com as pessoas com idade acima da média
  print(f'D) Lista das pessoas que estão acima da média ({media_idade:.1f} anos):')
  acima_media = [p for p in pessoas if p['idade'] > media_idade]

  if acima_media:
    for pessoa in acima_media:
      print(f"  - {pessoa['nome']} com {pessoa['idade']} anos")
  else:
    print("  Ninguém está acima da média de idade")

else:
  print("  Nenhuma pessoa está acima da média de idade.")

print("\n" + "=" * 50)
print(f"{'PROGRAMA ENCERRADO':^50}")
print("=" * 50)
